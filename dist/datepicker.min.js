!function(a,b){var c={container:"body",language:"cn",mode:"single",weekStart:7,format:"",prefix:"",theme:"simple"},d={container:"",picker:"",header:"",body:"",footer:""};d.container='<div id="jq-date-picker" class="cal-style"></div>',d.picker='<div class="per-picker"></div>',d.header='<div class="cal-header"><div class="cal-info"><span class="prev"><span class="prev-icon"></span></span><span class="cal-year-month"></span><span class="next"><span class="next-icon"></span></span></div><div class="cal-weeks"></div></div>',d.body='<div class="cal-body"></div>',d.footer='<div class="cal-footer"></div>';var e,f,g,h={enShort:["Mon","Tues","Wed","Thur","Fri","Sat","Sun"],cnShort:["一","二","三","四","五","六","日"],enLong:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],cnLong:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"]},i="single",j=1,k="en",l="body",m=1,n="",o="yyyy/mm/dd",p=[],q=function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();p.push({curr:a,currYear:b,currMonth:c,currDate:d});for(var e=1;j>e;e++){var f=new Date,g=b,h=c+e,i=d;g=h>12?g+1:g,h=h>12?h-12:h,f.setFullYear(g),f.setMonth(h-1),f.setDate(i),p.push({curr:f,currYear:g,currMonth:h,currDate:i})}},r=function(){var b=a.fn.datepicker.settings,c=b.container,d=b.mode,e=b.language;if("undefined"==typeof b.pickersNum)switch(d){case"single":j=1;break;case"range":j=2;break;default:j=1}else j=b.pickersNum||1;switch(e){case"cn":k="cn";break;case"en":k="en";break;default:k="en"}i=b.mode,m=b.weekStart,n=b.prefix,o=b.format,l=c?c:l},s=function(){u();for(var a=0;j>a;a++){x(),w(a);for(var b=0;4>b;b++)v(a);A(a)}},t=function(b){var c=a(d.container),e=a(d.picker),f=a(d.header),g=a(d.body),h=a(d.footer);e.append(f).append(g).append(h),b||(b=1);for(var i=0;b>i;i++){var e=e.attr("id","picker-"+i).attr("data-id",i);c.append(e.clone())}return n&&c.attr("id",n+"-date-picker"),c},u=function(){a(l).html(t(j))},v=function(b){for(var c=n?n+"-date-picker":"jq-date-picker",d=a("#"+c).find("#picker-"+b+" .cal-body"),e=a('<div class="cal-per-week"></div>'),f=0;7>f;f++){var g=a('<span class="cal-per-date"></span>');e.append(g)}d.append(e)},w=function(b){var c=m,d=n?n+"-date-picker":"jq-date-picker",e=a("#"+d).find("#picker-"+b).find(".cal-weeks"),f=h[k+"Short"];c--;var g=a('<span class="cal-day"></span>');a(e[0]).append(g.text(f[c]));for(var i=1;i<h[k+"Short"].length-c;i++){var j=a('<span class="cal-day"></span>');e.append(j.text(h[k+"Short"][i+c]))}for(var i=0;c>i;i++){var j=a('<span class="cal-day"></span>');e.append(j.text(h[k+"Short"][i]))}},x=function(b){if("undefined"==typeof b)for(var c=0;j>c;c++){var d=F.call(p[c].curr,o);a("#picker-"+c).find(".cal-year-month").text(d)}else{var d=F.call(p[b].curr,o);a("#picker-"+b).find(".cal-year-month").text(d)}},y=function(b,c){var d=b?new Date(b):new Date,e=F.call(d,o);__year=d.getFullYear(),__month=d.getMonth()+1,__date=d.getDate(),__ids=[],__pickers=[];for(var f=0;f<p.length;f++){var g=p[f];g.currYear===__year&&g.currMonth===__month&&__ids.push(f)}for(var f=0;f<__ids.length;f++)__pickers.push(a("#picker-"+__ids[f]+" .cal-per-date.has-date"));for(var f=0;f<__pickers.length;f++)for(var h=__pickers[f].length,i=0;h>i;i++)a(__pickers[f][i]).attr("data-date")===e&&a(__pickers[f][i]).addClass(c)},z=function(b,c){for(var d=new Date(b),e=new Date(c),f=(F.call(d,o),F.call(e,o),d.getFullYear()),g=d.getMonth()+1,h=(d.getDate(),e.getFullYear()),i=e.getMonth()+1,j=(e.getDate(),[]),k=[],l=0;l<p.length;l++){var m=p[l];m.currYear!==f&&m.currYear!==h||m.currMonth!==g&&m.currMonth!==i||j.push(l)}for(var l=0;l<j.length;l++)k.push(a("#picker-"+j[l]+" .cal-per-date.has-date"));for(var l=0;l<k.length;l++)for(var n=k[l].length,q=0;n>q;q++){var r=new Date(a(k[l][q]).attr("data-date"));r.getTime()>=d.getTime()&&r.getTime()<=e.getTime()&&a(k[l][q]).addClass("in-range")}},A=function(b){var c=m,d=a("#picker-"+b).find(".cal-per-date");d.text("").removeClass("has-date");var e,f=B(p[b].curr),g=C(p[b].curr);e=c>f?f-m+7:f-m;for(var h,i=a("#picker-"+b).find(".cal-per-date:eq("+e+"), .cal-per-date:gt("+e+")"),j=new Date(p[b].curr),k=1;g>=k;k++)if(i[k-1]){j.setDate(k);var l=F.call(j,o);a(i[k-1]).text(k).addClass("has-date").attr("data-date",l),h=k}var n=d.index(a("#picker-"+b+" .cal-per-date:last"));if(g>h){for(var q=g-h>7?2:1,k=0;q>k;k++)v(b);for(var r=a("#picker-"+b).find(".cal-per-date:gt("+n+")"),s=g-h,k=0;s>k;k++)if(r[k]){j.setDate(h+k+1);var l=F.call(j,o);a(r[k]).text(h+k+1).addClass("has-date").attr("data-date",l)}}},B=function(a){var b=new Date(a);return b.setDate(0),b.getDay()+1},C=function(a){var b=a.getMonth()+1,c=new Date(a);return c.setMonth(b),parseInt((c.getTime()-a.getTime())/1e3/60/60/24)},D=function(a){var b=a;p[b].currMonth<12?p[b].currMonth++:(p[b].currMonth=1,p[b].currYear++),p[b].curr.setFullYear(p[b].currYear),p[b].curr.setMonth(p[b].currMonth-1)},E=function(a){var b=a;p[b].currMonth>1?p[b].currMonth--:(p[b].currMonth=12,p[b].currYear--),p[b].curr.setFullYear(p[b].currYear),p[b].curr.setMonth(p[b].currMonth-1)},F=function(a){if(!(!this instanceof Date)){var b,c={y:this.getFullYear(),m:this.getMonth()+1,d:this.getDate(),hh:this.getHours(),mm:this.getMinutes(),ss:this.getSeconds()};switch(a){case"yyyy/mm/dd":b=c.y+"/"+c.m+"/"+c.d;break;case"yyyy-mm-dd":b=c.y+"-"+c.m+"-"+c.d;break;case"yyyy/mm/dd hh:mm:ss":b=c.y+"/"+c.m+"/"+c.d+" "+c.hh+":"+c.mm+":"+c.ss;break;case"yyyy-mm-dd hh:mm:ss":b=c.y+"/"+c.m+"/"+c.d+" "+c.hh+":"+c.mm+":"+c.ss;break;case"hh:mm:ss":b=c.hh+":"+c.mm+":"+c.ss;break;default:b=c.y+"/"+c.m+"/"+c.d}return b}},G=function(b,c,d){a("body").on(c,b,function(){if("function"==typeof d){var a=this;d(a)}})},H=[{t:".next",e:"click",f:function(c){var d=a(c).closest(".per-picker").attr("data-id");D(d),s(),x(d),A(d),y(b,"today"),y(e,"selected")}},{t:".prev",e:"click",f:function(c){var d=a(c).closest(".per-picker").attr("data-id");E(d),s(),x(d),A(d),y(b,"today"),y(e,"selected")}},{t:".cal-per-date.has-date",e:"click",f:function(b){{var c=a(b).closest(".per-picker");c.attr("data-id")}if("single"===i){e=a(b).addClass("selected").attr("data-date");for(var d=a(".cal-per-date.has-date"),h=d.length,j=0;h>j;j++)a(d[j]).removeClass("selected");e=a(b).addClass("selected").attr("data-date")}else if("range"===i){var k=++J;if(k%2){for(var d=a(".cal-per-date.has-date"),h=d.length,j=0;h>j;j++)a(d[j]).removeClass("range-first");f=a(b).addClass("range-first").attr("data-date")}else{for(var d=a(".cal-per-date.has-date"),h=d.length,j=0;h>j;j++)a(d[j]).removeClass("range-last, in-range");g=a(b).addClass("range-last").attr("data-date"),z(f,g)}2===J&&(J=0)}}}],I={},J=0;I.getDate=function(){if("range"===i)throw new Error("the current mode is 'range', use getRange() instead");return e},I.getRange=function(){if("single"===i)throw new Error("the current mode is 'single', use getDate() instead");return[f,g]},a.fn.datepicker=function(d){a.fn.datepicker.settings=a.extend(c,d),r(),q(),s(),y(b,"today");for(var e=0;e<H.length;e++)G(H[e].t,H[e].e,H[e].f);return I}}(jQuery);